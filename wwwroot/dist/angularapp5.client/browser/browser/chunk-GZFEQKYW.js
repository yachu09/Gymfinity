import{Ab as p,B as i,g as n,l as r,lb as c,nb as l,wb as u,y as a}from"./chunk-4WBI4IRS.js";var h=class s{constructor(e,t){this.http=e;this.router=t}baseUrl=p.apiUrl;currentUserSource=new n(1);currentUser$=this.currentUserSource.asObservable();loadCurrentUser(e){if(e===null){this.currentUserSource.next(null);return}let t=new c;return t=t.set("Authorization",`Bearer ${e}`),this.http.get(this.baseUrl+"account",{headers:t}).pipe(r(o=>{o&&(localStorage.setItem("token",o.token),this.currentUserSource.next(o))}))}login(e){return this.http.post(this.baseUrl+"account/login",e).pipe(r(t=>{t&&(localStorage.setItem("token",t.token),this.currentUserSource.next(t))}))}register(e){return this.http.post(this.baseUrl+"account/register",e).pipe(r(t=>{t&&(localStorage.setItem("token",t.token),this.currentUserSource.next(t))}))}logout(){localStorage.removeItem("token"),this.currentUserSource.next(null),this.router.navigateByUrl("/")}checkEmailExists(e){return this.http.get(this.baseUrl+"account/emailexists?email="+e)}getUserAddress(){return this.http.get(this.baseUrl+"account/address")}updateUserAddress(e){return this.http.put(this.baseUrl+"account/address",e)}static \u0275fac=function(t){return new(t||s)(i(l),i(u))};static \u0275prov=a({token:s,factory:s.\u0275fac,providedIn:"root"})};export{h as a};
