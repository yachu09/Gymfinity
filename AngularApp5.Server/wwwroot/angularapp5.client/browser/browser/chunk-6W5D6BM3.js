import{a as N}from"./chunk-AUDLG5KQ.js";import{L as pe,p as oe,q as re,s as ae}from"./chunk-IU5AUCM7.js";import{B as Q,Ba as b,Ca as R,Ea as A,F as d,Fa as $,G as u,Ga as W,Ia as p,J as q,Ja as v,Ka as E,La as G,Ra as J,Sa as K,T as w,U as a,V as S,ba as f,ca as T,cb as X,db as I,ga as h,ib as Y,jb as Z,ka as c,l as U,ma as F,mb as ee,nb as te,oa as o,pa as r,qa as C,ua as _,ub as ie,xa as m,xb as ne,y as L,ya as l,z as k,zb as H}from"./chunk-4WBI4IRS.js";var x=class{brandId=0;typeId=0;sort="name";pageNumber=1;pageSize=6;search=""};var P=class i{constructor(t){this.http=t}baseUrl="http://localhost:5120/api/";getProducts(t){let e=new ee;return t.brandId!==0&&(e=e.append("brandId",t.brandId.toString())),t.typeId!==0&&(e=e.append("typeId",t.typeId.toString())),t.search&&(e=e.append("search",t.search)),e=e.append("sort",t.sort),e=e.append("pageIndex",t.pageNumber.toString()),e=e.append("pageSize",t.pageSize.toString()),this.http.get(this.baseUrl+"products",{observe:"response",params:e}).pipe(U(n=>n.body))}getProduct(t){return this.http.get(this.baseUrl+"products/"+t)}getBrands(){return this.http.get(this.baseUrl+"products/brands")}getTypes(){return this.http.get(this.baseUrl+"products/types")}static \u0275fac=function(e){return new(e||i)(Q(te))};static \u0275prov=L({token:i,factory:i.\u0275fac,providedIn:"root"})};function de(i,t){if(i&1&&(o(0,"span"),p(1," Produkty "),o(2,"strong"),p(3),r(),p(4," z "),o(5,"strong"),p(6),r(),p(7," produkt\xF3w "),r()),i&2){let e=l();a(3),G(" ",(e.pageNumber-1)*e.pageSize+1," - ",e.pageNumber*e.pageSize>e.totalCount?e.totalCount:e.pageNumber*e.pageSize," "),a(3),v(e.totalCount)}}function ue(i,t){i&1&&(o(0,"span"),p(1," Nie ma produkt\xF3w pasuj\u0105cych do tych filtr\xF3w "),r())}var z=class i{pageNumber;pageSize;totalCount;constructor(){}ngOnInit(){}static \u0275fac=function(e){return new(e||i)};static \u0275cmp=f({type:i,selectors:[["app-paging-header"]],inputs:{pageNumber:"pageNumber",pageSize:"pageSize",totalCount:"totalCount"},standalone:!1,decls:3,vars:2,consts:[[4,"ngIf"]],template:function(e,n){e&1&&(o(0,"header"),h(1,de,8,3,"span",0)(2,ue,2,0,"span",0),r()),e&2&&(a(),c("ngIf",n.totalCount&&n.totalCount>0),a(),c("ngIf",n.totalCount===0))},dependencies:[I],encapsulation:2})};var D=class i{totalCount;pageSize;pageChanged=new q;constructor(){}ngOnInit(){}onPagerChange(t){this.pageChanged.emit(t.page)}static \u0275fac=function(e){return new(e||i)};static \u0275cmp=f({type:i,selectors:[["app-pager"]],inputs:{totalCount:"totalCount",pageSize:"pageSize"},outputs:{pageChanged:"pageChanged"},standalone:!1,decls:1,vars:3,consts:[["previousText","\u2039","nextText","\u203A","firstText","\xAB","lastText","\xBB",3,"pageChanged","boundaryLinks","totalItems","itemsPerPage"]],template:function(e,n){e&1&&(o(0,"pagination",0),m("pageChanged",function(g){return n.onPagerChange(g)}),r()),e&2&&c("boundaryLinks",!0)("totalItems",n.totalCount)("itemsPerPage",n.pageSize)},dependencies:[ae],encapsulation:2})};var M=class i{constructor(t){this.basketService=t}product;ngOnInit(){}addItemToBasket(){this.basketService.addItemToBasket(this.product)}static \u0275fac=function(e){return new(e||i)(S(N))};static \u0275cmp=f({type:i,selectors:[["app-product-item"]],inputs:{product:"product"},standalone:!1,decls:13,vars:8,consts:[[1,"card","h-100","shadow-sm"],[1,"image","position-relative",2,"cursor","pointer"],[1,"img-fluid","bg-light",3,"src","alt"],[1,"d-flex","align-items-center","justify-content-center","hover-overlay"],["type","button",1,"btn","btn-primary","fa","fa-shopping-cart","me-2",3,"click"],["type","button",1,"btn","btn-primary",3,"routerLink"],[1,"card-body","d-flex","flex-column"],[3,"routerLink"],[1,"text-uppercase"],[1,"mb-2"]],template:function(e,n){e&1&&(o(0,"div",0)(1,"div",1),C(2,"img",2),o(3,"div",3)(4,"button",4),m("click",function(){return n.addItemToBasket()}),r(),o(5,"button",5),p(6,"Detale"),r()()(),o(7,"div",6)(8,"a",7)(9,"h6",8),p(10),r()(),o(11,"span",9),p(12),r()()()),e&2&&(a(2),b("src",n.product.imageUrl,w),b("alt",n.product.name),a(3),R("routerLink","/shop/",n.product.id,""),a(3),R("routerLink","/shop/",n.product.id,""),a(2),v(n.product.name),a(2),v(n.product.price))},dependencies:[ne],styles:[".btn[_ngcontent-%COMP%]{width:30%;height:40px}.image[_ngcontent-%COMP%]:hover   .hover-overlay[_ngcontent-%COMP%]{opacity:1}.hover-overlay[_ngcontent-%COMP%]{position:absolute;width:100%;height:100%;top:0;left:0;display:flex;align-items:center;justify-content:center;background:#ffffff80;opacity:0;transition:all .5s}"]})};var Ce=["search"];function _e(i,t){if(i&1&&(o(0,"option",19),p(1),r()),i&2){let e=t.$implicit;c("value",e.value),a(),E(" ",e.name," ")}}function ye(i,t){if(i&1){let e=_();o(0,"li",20),m("click",function(){let s=d(e).$implicit,g=l();return u(g.onBrandSelected(s.id))}),p(1),r()}if(i&2){let e=t.$implicit,n=l();F("active",e.id===n.shopParams.brandId),c("value",e.id),a(),E(" ",e.name," ")}}function be(i,t){if(i&1){let e=_();o(0,"li",20),m("click",function(){let s=d(e).$implicit,g=l();return u(g.onTypeSelected(s.id))}),p(1),r()}if(i&2){let e=t.$implicit,n=l();F("active",e.id===n.shopParams.typeId),c("value",e.id),a(),E(" ",e.name," ")}}function Ie(i,t){if(i&1&&(o(0,"div",21),C(1,"app-product-item",22),r()),i&2){let e=t.$implicit;a(),c("product",e)}}function Pe(i,t){if(i&1){let e=_();o(0,"div",23)(1,"app-pager",24),m("pageChanged",function(s){d(e);let g=l();return u(g.onPageChanged(s))}),r()()}if(i&2){let e=l();a(),c("pageSize",e.shopParams.pageSize)("totalCount",e.totalCount)}}var B=class i{constructor(t){this.shopService=t}searchTerm;products=[];brands=[];types=[];shopParams=new x;totalCount=0;sortOptions=[{name:"Alfabetycznie",value:"name"},{name:"Cena: Rosn\u0105co",value:"priceAsc"},{name:"Cena: Malej\u0105co",value:"priceDesc"}];ngOnInit(){this.getProducts(),this.getBrands(),this.getTypes()}getProducts(){this.shopService.getProducts(this.shopParams).subscribe(t=>{t?(this.products=t.data,this.shopParams.pageNumber=t.pageIndex,this.shopParams.pageSize=t.pageSize,this.totalCount=t.count):console.error("Response is null")},t=>{console.log(t)})}getBrands(){this.shopService.getBrands().subscribe(t=>{this.brands=[{id:0,name:"Wszystkie"},...t]},t=>{console.log(t)})}getTypes(){this.shopService.getTypes().subscribe(t=>{this.types=[{id:0,name:"Wszystkie"},...t]},t=>{console.log(t)})}onBrandSelected(t){this.shopParams.brandId=t,this.shopParams.pageNumber=1,this.getProducts()}onTypeSelected(t){this.shopParams.typeId=t,this.shopParams.pageNumber=1,this.getProducts()}onSortSelected(t){let e=t.target;this.shopParams.sort=e.value,this.getProducts()}onPageChanged(t){this.shopParams.pageNumber!==t&&(this.shopParams.pageNumber=t,this.getProducts())}onSearch(){this.shopParams.search=this.searchTerm.nativeElement.value,this.shopParams.pageNumber=1,this.getProducts()}onReset(){this.searchTerm.nativeElement.value="",this.shopParams=new x,this.getProducts()}static \u0275fac=function(e){return new(e||i)(S(P))};static \u0275cmp=f({type:i,selectors:[["app-shop"]],viewQuery:function(e,n){if(e&1&&A(Ce,7),e&2){let s;$(s=W())&&(n.searchTerm=s.first)}},standalone:!1,decls:28,vars:8,consts:[["search",""],[1,"container"],[1,"row"],[1,"col-3"],[1,"ms-3","mt-4","mb-3",2,"color","blue","font-size","1.4em"],[1,"form-select","mb-3",3,"change"],[3,"value",4,"ngFor","ngForOf"],[1,"ms-3",2,"color","blue"],[1,"list-group","my-3"],["class","list-group-item",3,"active","value","click",4,"ngFor","ngForOf"],[1,"col-9"],[1,"d-flex","justify-content-between","align-items-center","pb-2"],[3,"totalCount","pageSize","pageNumber"],[1,"d-flex","align-items-center","mt-3"],["placeholder","Szukaj","type","text",1,"form-control","me-2",2,"width","300px",3,"keyup.enter"],[1,"btn","btn-outline-primary","my-2",3,"click"],[1,"btn","btn-outline-danger","ms-2","my-2",3,"click"],["class","col-4 mb-4",4,"ngFor","ngForOf"],["class","d-flex justify-content-center",4,"ngIf"],[3,"value"],[1,"list-group-item",3,"click","value"],[1,"col-4","mb-4"],[3,"product"],[1,"d-flex","justify-content-center"],[3,"pageChanged","pageSize","totalCount"]],template:function(e,n){if(e&1){let s=_();o(0,"div",1)(1,"div",2)(2,"section",3)(3,"h5",4),p(4,"Sortowanie"),r(),o(5,"select",5),m("change",function(le){return d(s),u(n.onSortSelected(le))}),h(6,_e,2,2,"option",6),r(),o(7,"h5",7),p(8,"Marka produktu"),r(),o(9,"ul",8),h(10,ye,2,4,"li",9),r(),o(11,"h5",7),p(12,"Typ produktu"),r(),o(13,"ul",8),h(14,be,2,4,"li",9),r()(),o(15,"section",10)(16,"div",11),C(17,"app-paging-header",12),o(18,"div",13)(19,"input",14,0),m("keyup.enter",function(){return d(s),u(n.onSearch())}),r(),o(21,"button",15),m("click",function(){return d(s),u(n.onSearch())}),p(22,"Szukaj"),r(),o(23,"button",16),m("click",function(){return d(s),u(n.onReset())}),p(24,"Reset"),r()()(),o(25,"div",2),h(26,Ie,2,1,"div",17),r(),h(27,Pe,2,2,"div",18),r()()()}e&2&&(a(6),c("ngForOf",n.sortOptions),a(4),c("ngForOf",n.brands),a(4),c("ngForOf",n.types),a(3),c("totalCount",n.totalCount)("pageSize",n.shopParams.pageSize)("pageNumber",n.shopParams.pageNumber),a(9),c("ngForOf",n.products),a(),c("ngIf",n.totalCount>0))},dependencies:[X,I,z,D,oe,re,M],encapsulation:2})};function xe(i,t){if(i&1){let e=_();o(0,"div",4)(1,"div",5),C(2,"img",6),r(),o(3,"div",5)(4,"h3"),p(5),r(),o(6,"p",7),p(7),J(8,"currency"),r(),o(9,"div",8)(10,"i",9),m("click",function(){d(e);let s=l();return u(s.decrementQuantity())}),r(),o(11,"span",10),p(12),r(),o(13,"i",11),m("click",function(){d(e);let s=l();return u(s.incrementQuantity())}),r(),o(14,"button",12),m("click",function(){d(e);let s=l();return u(s.addItemToBasket())}),p(15,"Dodaj do koszyka"),r()()()()}if(i&2){let e=l();a(2),b("src",e.product.imageUrl,w),b("alt",e.product.name),a(3),v(e.product.name),a(2),v(K(8,5,e.product.price)),a(5),v(e.quantity)}}var V=class i{constructor(t,e,n){this.shopService=t;this.activatedRoute=e;this.basketService=n}product;quantity=1;ngOnInit(){this.loadProduct()}addItemToBasket(){this.basketService.addItemToBasket(this.product,this.quantity)}incrementQuantity(){this.quantity++}decrementQuantity(){this.quantity>1&&this.quantity--}loadProduct(){let t=this.activatedRoute.snapshot.paramMap.get("id");t!==null?this.shopService.getProduct(+t).subscribe(e=>{this.product=e},e=>{console.log(e)}):console.error("ID is null")}static \u0275fac=function(e){return new(e||i)(S(P),S(ie),S(N))};static \u0275cmp=f({type:i,selectors:[["app-product-details"]],standalone:!1,decls:8,vars:2,consts:[[1,"container","mt-5"],["class","row",4,"ngIf"],[1,"row","mt-5"],[1,"col-12","ms-3"],[1,"row"],[1,"col-6"],[1,"img-fluid","w-100",3,"src","alt"],[2,"font-size","2em"],[1,"d-flex","justify-content-start","align-items-center"],[1,"fa","fa-minus-circle","text-warning","me-2",2,"cursor","pointer","font-size","2em",3,"click"],[1,"font-weight-bold",2,"font-size","1.5em"],[1,"fa","fa-plus-circle","text-warning","mx-2",2,"cursor","pointer","font-size","2em",3,"click"],[1,"btn","btn-outline-primary","btn-lg","ms-4",3,"click"]],template:function(e,n){e&1&&(o(0,"div",0),h(1,xe,16,7,"div",1),o(2,"div",2)(3,"div",3)(4,"h4"),p(5,"Opis"),r(),o(6,"p"),p(7),r()()()()),e&2&&(a(),c("ngIf",n.product),a(6),v(n.product.description))},dependencies:[I,Y],encapsulation:2})};var ke=[{path:"",component:B},{path:":id",component:V}],j=class i{static \u0275fac=function(e){return new(e||i)};static \u0275mod=T({type:i});static \u0275inj=k({imports:[H.forChild(ke),H]})};var me=class i{static \u0275fac=function(e){return new(e||i)};static \u0275mod=T({type:i});static \u0275inj=k({imports:[Z,pe,j]})};export{me as ShopModule};
